(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{1100:function(e,t,r){Promise.resolve().then(r.bind(r,8416))},8146:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(6340),a=r.n(s)},1695:function(e,t,r){"use strict";var s=r(1219);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4859:function(e,t,r){"use strict";var s,a;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(9566)},9566:function(e){!function(){var t={229:function(e){var t,r,s,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var c=[],l=!1,d=-1;function u(){l&&s&&(l=!1,s.length?c=s.concat(c):d=-1,c.length&&m())}function m(){if(!l){var e=i(u);l=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function s(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}},n=!0;try{t[e](o,o.exports,s),n=!1}finally{n&&delete r[e]}return o.exports}s.ab="//";var a=s(229);e.exports=a}()},8416:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(7573),a=r(7653),o=r(8146),n=r(1695),i=r(5118);function c(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("token"),[r,c]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[u,m]=(0,a.useState)("idle"),[h,f]=(0,a.useState)(""),p=async s=>{if(s.preventDefault(),!t){f("Invalid or missing reset token."),m("error");return}if(r!==l){f("Passwords do not match."),m("error");return}if(r.length<8){f("Password must be at least 8 characters long."),m("error");return}m("loading"),f("");try{await (0,i.Nv)("/auth/reset-password",{method:"POST",body:{token:t,newPassword:r}}),m("success"),setTimeout(()=>{e.push("/login")},3e3)}catch(e){console.error("Password reset failed",e),m("error"),f(e.message||"Failed to reset password. The link may have expired.")}};return t?"success"===u?(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-xl border border-gray-700 text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"✅"}),(0,s.jsx)("h2",{className:"text-3xl font-extrabold text-white",children:"Password Reset!"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Your password has been successfully reset. Redirecting you to login..."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(o.default,{href:"/login",className:"font-medium text-primary-400 hover:text-primary-300 transition",children:"Go to Login Now"})})]}):(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Set new password"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Please enter your new password below."})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-1",children:"New Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:e=>c(e.target.value),className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm transition-colors",placeholder:"********"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-400 mb-1",children:"Confirm Password"}),(0,s.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:l,onChange:e=>d(e.target.value),className:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-700 placeholder-gray-500 text-white bg-gray-800 focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm transition-colors",placeholder:"********"})]})]}),"error"===u&&(0,s.jsx)("div",{className:"rounded-md bg-red-900/30 p-4 border border-red-800",children:(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-400",children:"Error"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-300",children:(0,s.jsx)("p",{children:h})})]})})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:"loading"===u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white ".concat("loading"===u?"bg-primary-700 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-primary-500"," transition-colors shadow-lg hover:shadow-primary-900/20"),children:"loading"===u?"Resetting...":"Reset Password"})})]})]}):(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-xl border border-gray-700 text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Invalid Link"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"This password reset link is invalid or has expired. Please request a new one."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(o.default,{href:"/auth/forgot-password",className:"font-medium text-primary-400 hover:text-primary-300 transition",children:"Request New Link"})})]})}function l(){return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 px-4 py-12 sm:px-6 lg:px-8",children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"text-white",children:"Loading..."}),children:(0,s.jsx)(c,{})})})}},5118:function(e,t,r){"use strict";r.d(t,{Lc:function(){return i},Nv:function(){return o},Sh:function(){return d},kx:function(){return l},sA:function(){return n},tF:function(){return c}});let s=r(4859).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";async function a(){return localStorage.getItem("accessToken")}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:o,token:n}=t,i=null!=n?n:await a(),c={"Content-Type":"application/json"};i&&(c.Authorization="Bearer ".concat(i));let l=await fetch("".concat(s).concat(e),{method:r,headers:c,body:o?JSON.stringify(o):void 0}),d=await l.json();if(!l.ok){var u;throw Error((null===(u=d.error)||void 0===u?void 0:u.message)||"Request failed")}return d}let n={getDomains:()=>o("/domains"),getDomain:e=>o("/domains/".concat(e)),getTasks:e=>o("/domains/".concat(e,"/tasks")),getStudyGuide:e=>o("/domains/tasks/".concat(e,"/study-guide")),markSectionComplete:e=>o("/domains/progress/sections/".concat(e,"/complete"),{method:"POST"}),getProgress:()=>o("/domains/progress")},i={getFlashcards:e=>{let t=new URLSearchParams;return(null==e?void 0:e.domainId)&&t.set("domainId",e.domainId),(null==e?void 0:e.taskId)&&t.set("taskId",e.taskId),(null==e?void 0:e.limit)&&t.set("limit",String(e.limit)),o("/flashcards?".concat(t))},getDueForReview:e=>o("/flashcards/review".concat(e?"?limit=".concat(e):"")),getStats:()=>o("/flashcards/stats"),startSession:e=>o("/flashcards/sessions",{method:"POST",body:e}),recordResponse:(e,t,r,s)=>o("/flashcards/sessions/".concat(e,"/responses/").concat(t),{method:"POST",body:{rating:r,timeSpentMs:s}}),completeSession:e=>o("/flashcards/sessions/".concat(e,"/complete"),{method:"POST"}),createCustom:e=>o("/flashcards/custom",{method:"POST",body:e})},c={startSession:e=>o("/practice/sessions",{method:"POST",body:e}),submitAnswer:(e,t,r,s)=>o("/practice/sessions/".concat(e,"/answers/").concat(t),{method:"POST",body:{selectedOptionId:r,timeSpentMs:s}}),completeSession:e=>o("/practice/sessions/".concat(e,"/complete"),{method:"POST"}),startMockExam:()=>o("/practice/mock-exams",{method:"POST"}),getFlagged:()=>o("/practice/flagged"),flagQuestion:e=>o("/practice/questions/".concat(e,"/flag"),{method:"POST"}),unflagQuestion:e=>o("/practice/questions/".concat(e,"/flag"),{method:"DELETE"}),getStats:()=>o("/practice/stats")},l={getDashboard:()=>o("/dashboard"),getStreak:()=>o("/dashboard/streak"),getProgress:()=>o("/dashboard/progress"),getActivity:e=>o("/dashboard/activity".concat(e?"?limit=".concat(e):"")),getReviews:e=>o("/dashboard/reviews".concat(e?"?limit=".concat(e):"")),getWeakAreas:()=>o("/dashboard/weak-areas"),getReadiness:()=>o("/dashboard/readiness"),getRecommendations:()=>o("/dashboard/recommendations")},d={getFormulas:e=>o("/formulas".concat(e?"?category=".concat(e):"")),getFormula:e=>o("/formulas/".concat(e)),calculate:(e,t)=>o("/formulas/".concat(e,"/calculate"),{method:"POST",body:{inputs:t}}),getVariables:()=>o("/formulas/variables")}}},function(e){e.O(0,[340,293,528,744],function(){return e(e.s=1100)}),_N_E=e.O()}]);