# Feature 2: Update admin test creation API to accept domain filter parameters

## Status: COMPLETED

## Summary
Updated the admin test creation API (`createTest` endpoint) to accept an optional `domainIds` parameter that allows associating tests with specific domains.

## Changes Made

### File: `src/controllers/adminController.ts`

Updated the `createTest` function (POST /api/admin/tests) with the following enhancements:

1. **New Parameter**: Added optional `domainIds: string[]` parameter to the request body
   - If provided and non-empty, creates `TestDomain` records linking the test to those domains
   - If empty or not provided, the test is considered a full-spectrum test (all domains)

2. **Domain Validation**: Added validation to check that all provided domain IDs exist in the database
   - Queries the `Domain` table to verify IDs
   - Returns a 400 Bad Request error with a list of invalid IDs if any are not found

3. **TestDomain Creation**: After creating the `PracticeTest`, if `domainIds` is provided and non-empty, creates `TestDomain` junction table records using `prisma.testDomain.createMany()`

4. **Enhanced Response**: Updated the response to include domain associations:
   - Fetches the created test with its `domains` relation
   - Returns domain details (id, name, color) in the response

## API Usage

```json
POST /api/admin/tests
{
  "name": "People Domain Practice Test",
  "description": "Focus on People domain questions",
  "timeLimitMinutes": 90,
  "questionIds": ["q1", "q2", "q3"],
  "domainIds": ["domain-uuid-1"]
}
```

## Backward Compatibility
- The `domainIds` parameter is optional
- Existing API calls without `domainIds` continue to work as before (creating full-spectrum tests)
- Empty `domainIds` array is treated the same as not providing it
